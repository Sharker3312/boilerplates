# =============================================================================
# Prometheus Configuration
# =============================================================================
# Boilerplate configuration for Prometheus running in Docker.
#
# Usage:
#   1. Copy this file alongside the docker-compose.yml
#   2. Update the scrape targets below to match your environment
#   3. (Optional) Add alerting rules under /etc/prometheus/rules/
#
# Docs: https://prometheus.io/docs/prometheus/latest/configuration/configuration/
# =============================================================================

global:
  scrape_interval: 15s        # How often to scrape targets (default: 1m)
  evaluation_interval: 15s    # How often to evaluate alerting rules
  scrape_timeout: 10s         # Per-target scrape timeout

  # Attach these labels to any time series or alert when communicating with
  # external systems (federation, remote storage, Alertmanager).
  external_labels:
    cluster: "default"
    environment: "production"  # Change to: staging / development as needed

# =============================================================================
# Alertmanager (uncomment to enable)
# =============================================================================
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#             - "alertmanager:9093"

# =============================================================================
# Rule files (uncomment to load alerting/recording rules)
# =============================================================================
# rule_files:
#   - /etc/prometheus/rules/*.yml

# =============================================================================
# Scrape Configs
# =============================================================================
scrape_configs:

  # ---------------------------------------------------------------------------
  # Prometheus self-monitoring
  # ---------------------------------------------------------------------------
  - job_name: "prometheus"
    static_configs:
      - targets: ["prometheus:9090"]

  # ---------------------------------------------------------------------------
  # Loki metrics
  # ---------------------------------------------------------------------------
  - job_name: "loki"
    static_configs:
      - targets: ["loki:3100"]

  # ---------------------------------------------------------------------------
  # Node Exporter — host-level metrics (CPU, RAM, disk, network)
  # Uncomment and set the target IPs/hostnames where node_exporter runs.
  # See: ansible/playbooks/monitoring/node-exporter.yml to deploy it.
  # ---------------------------------------------------------------------------
  # - job_name: "node-exporter"
  #   scrape_interval: 10s
  #   static_configs:
  #     - targets:
  #         - "node-exporter:9100"
  #         # - "192.168.1.10:9100"
  #         # - "192.168.1.11:9100"

  # ---------------------------------------------------------------------------
  # Grafana metrics
  # ---------------------------------------------------------------------------
  # - job_name: "grafana"
  #   static_configs:
  #     - targets: ["grafana:3000"]

  # ---------------------------------------------------------------------------
  # Docker / cAdvisor — container-level metrics
  # ---------------------------------------------------------------------------
  # - job_name: "cadvisor"
  #   scrape_interval: 10s
  #   static_configs:
  #     - targets:
  #         - "cadvisor:8080"

  # ---------------------------------------------------------------------------
  # Traefik metrics (if enabled in traefik config)
  # ---------------------------------------------------------------------------
  # - job_name: "traefik"
  #   static_configs:
  #     - targets: ["traefik:8082"]
